<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_BjdAQOCTEeqUC68H4d8fow" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd http://www.omg.org/spec/DD/20100524/DC DC.xsd http://www.omg.org/spec/DD/20100524/DI DI.xsd " exporter="jBPM Process Modeler" exporterVersion="2.0" targetNamespace="http://www.omg.org/bpmn20">
  <bpmn2:itemDefinition id="_listInItem" structureRef="java.util.List"/>
  <bpmn2:itemDefinition id="_5EA54193-192A-4C71-81E1-C0032A0C1E80_multiInstanceItemType_item" structureRef="String"/>
  <bpmn2:process id="error-handling-sp.mi" drools:packageName="com.demo.error_handling_sp" drools:version="1.0" drools:adHoc="false" name="mi" isExecutable="true">
    <bpmn2:property id="listIn" itemSubjectRef="_listInItem" name="listIn"/>
    <bpmn2:sequenceFlow id="_BF79674B-4B85-4FD0-BBCD-6DD25CE277E4" sourceRef="_0F599C03-661E-4F9A-983A-1C4C1604E2BF" targetRef="_2C24A2E9-49D6-44AA-B74A-752D8E1A6B54">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.source">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_E06854FF-0FD5-42BC-BAC0-E2EAEEA2361B" sourceRef="_5EA54193-192A-4C71-81E1-C0032A0C1E80" targetRef="_0F599C03-661E-4F9A-983A-1C4C1604E2BF">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.source">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_87E68D63-7C18-4CA4-9232-2EE6B43ADDE0" sourceRef="_7BA4E759-44DC-4CDE-8A37-AB0D04BAAA47" targetRef="_5EA54193-192A-4C71-81E1-C0032A0C1E80">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_143DE49B-5E96-4678-8AD1-58513AF84C0A" sourceRef="_2CFC1986-696D-4293-A5B3-91502316F999" targetRef="_7BA4E759-44DC-4CDE-8A37-AB0D04BAAA47">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.source">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:endEvent id="_2C24A2E9-49D6-44AA-B74A-752D8E1A6B54">
      <bpmn2:incoming>_BF79674B-4B85-4FD0-BBCD-6DD25CE277E4</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:scriptTask id="_0F599C03-661E-4F9A-983A-1C4C1604E2BF" name="Log" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Log]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_E06854FF-0FD5-42BC-BAC0-E2EAEEA2361B</bpmn2:incoming>
      <bpmn2:outgoing>_BF79674B-4B85-4FD0-BBCD-6DD25CE277E4</bpmn2:outgoing>
      <bpmn2:script><![CDATA[System.out.println(">>> [Main] ");]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_7BA4E759-44DC-4CDE-8A37-AB0D04BAAA47" name="Log" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Log]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_143DE49B-5E96-4678-8AD1-58513AF84C0A</bpmn2:incoming>
      <bpmn2:outgoing>_87E68D63-7C18-4CA4-9232-2EE6B43ADDE0</bpmn2:outgoing>
      <bpmn2:script><![CDATA[java.util.List<String> l = new java.util.ArrayList<String>();
for(int i = 1; i < 21; i++) {
    l.add("Entry " + i);
}
kcontext.setVariable("listIn", l);
int p = Runtime.getRuntime().availableProcessors();
System.out.println(">>> [Main] Number of Processors:  " + p);
System.out.println(">>> [Main] List In: " + listIn);
]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:startEvent id="_2CFC1986-696D-4293-A5B3-91502316F999">
      <bpmn2:outgoing>_143DE49B-5E96-4678-8AD1-58513AF84C0A</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:subProcess id="_5EA54193-192A-4C71-81E1-C0032A0C1E80" name="Multiple Instance Sub-process">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Multiple Instance Sub-process]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="customAsync">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_87E68D63-7C18-4CA4-9232-2EE6B43ADDE0</bpmn2:incoming>
      <bpmn2:outgoing>_E06854FF-0FD5-42BC-BAC0-E2EAEEA2361B</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_BjdAQeCTEeqUC68H4d8fow">
        <bpmn2:dataInput id="_5EA54193-192A-4C71-81E1-C0032A0C1E80_IN_COLLECTIONInputX" itemSubjectRef="_listInItem" name="IN_COLLECTION"/>
        <bpmn2:dataInput id="_5EA54193-192A-4C71-81E1-C0032A0C1E80_itemInputX" itemSubjectRef="_5EA54193-192A-4C71-81E1-C0032A0C1E80_multiInstanceItemType_item" name="item"/>
        <bpmn2:inputSet id="_BjdAQuCTEeqUC68H4d8fow">
          <bpmn2:dataInputRefs>_5EA54193-192A-4C71-81E1-C0032A0C1E80_IN_COLLECTIONInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_5EA54193-192A-4C71-81E1-C0032A0C1E80_itemInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_BjdAQ-CTEeqUC68H4d8fow"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_BjdAROCTEeqUC68H4d8fow">
        <bpmn2:sourceRef>listIn</bpmn2:sourceRef>
        <bpmn2:targetRef>_5EA54193-192A-4C71-81E1-C0032A0C1E80_IN_COLLECTIONInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:multiInstanceLoopCharacteristics id="_BjdAReCTEeqUC68H4d8fow">
        <bpmn2:loopDataInputRef>_5EA54193-192A-4C71-81E1-C0032A0C1E80_IN_COLLECTIONInputX</bpmn2:loopDataInputRef>
        <bpmn2:inputDataItem xsi:type="bpmn2:tDataInput" id="item" itemSubjectRef="_5EA54193-192A-4C71-81E1-C0032A0C1E80_multiInstanceItemType_item" name="item"/>
      </bpmn2:multiInstanceLoopCharacteristics>
      <bpmn2:sequenceFlow id="_C449181C-D121-4536-B103-01A25E790573" sourceRef="_390B81F2-DD33-4FA0-9870-C9C7123EB7E5" targetRef="_39688F1B-81D9-4E3C-9E27-FBE203627EB6">
        <bpmn2:extensionElements>
          <drools:metaData name="isAutoConnection.source">
            <drools:metaValue><![CDATA[true]]></drools:metaValue>
          </drools:metaData>
          <drools:metaData name="isAutoConnection.target">
            <drools:metaValue><![CDATA[true]]></drools:metaValue>
          </drools:metaData>
        </bpmn2:extensionElements>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_0409E887-1135-4904-A9DA-6CC497E228CB" sourceRef="_39688F1B-81D9-4E3C-9E27-FBE203627EB6" targetRef="_84825181-3B2D-4F27-A8B2-8CCD239C6E56">
        <bpmn2:extensionElements>
          <drools:metaData name="isAutoConnection.source">
            <drools:metaValue><![CDATA[true]]></drools:metaValue>
          </drools:metaData>
          <drools:metaData name="isAutoConnection.target">
            <drools:metaValue><![CDATA[true]]></drools:metaValue>
          </drools:metaData>
        </bpmn2:extensionElements>
      </bpmn2:sequenceFlow>
      <bpmn2:scriptTask id="_39688F1B-81D9-4E3C-9E27-FBE203627EB6" name="Task" scriptFormat="http://www.java.com/java">
        <bpmn2:extensionElements>
          <drools:metaData name="elementname">
            <drools:metaValue><![CDATA[Task]]></drools:metaValue>
          </drools:metaData>
        </bpmn2:extensionElements>
        <bpmn2:incoming>_C449181C-D121-4536-B103-01A25E790573</bpmn2:incoming>
        <bpmn2:outgoing>_0409E887-1135-4904-A9DA-6CC497E228CB</bpmn2:outgoing>
        <bpmn2:script><![CDATA[String thread = Thread.currentThread().getId() + " # " + Thread.currentThread().getName() ;

System.out.println(">>> ["+thread+"] [MI] Current item: " + item);

]]></bpmn2:script>
      </bpmn2:scriptTask>
      <bpmn2:startEvent id="_390B81F2-DD33-4FA0-9870-C9C7123EB7E5">
        <bpmn2:outgoing>_C449181C-D121-4536-B103-01A25E790573</bpmn2:outgoing>
      </bpmn2:startEvent>
      <bpmn2:endEvent id="_84825181-3B2D-4F27-A8B2-8CCD239C6E56">
        <bpmn2:incoming>_0409E887-1135-4904-A9DA-6CC497E228CB</bpmn2:incoming>
      </bpmn2:endEvent>
    </bpmn2:subProcess>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_BjdARuCTEeqUC68H4d8fow">
    <bpmndi:BPMNPlane id="_BjdAR-CTEeqUC68H4d8fow" bpmnElement="error-handling-sp.mi">
      <bpmndi:BPMNShape id="shape__5EA54193-192A-4C71-81E1-C0032A0C1E80" bpmnElement="_5EA54193-192A-4C71-81E1-C0032A0C1E80">
        <dc:Bounds height="250.0" width="650.0" x="412.0" y="66.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__84825181-3B2D-4F27-A8B2-8CCD239C6E56" bpmnElement="_84825181-3B2D-4F27-A8B2-8CCD239C6E56">
        <dc:Bounds height="56.0" width="56.0" x="833.0" y="163.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__390B81F2-DD33-4FA0-9870-C9C7123EB7E5_to_shape__39688F1B-81D9-4E3C-9E27-FBE203627EB6" bpmnElement="_C449181C-D121-4536-B103-01A25E790573">
        <di:waypoint xsi:type="dc:Point" x="519.0" y="191.0"/>
        <di:waypoint xsi:type="dc:Point" x="599.0" y="191.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__39688F1B-81D9-4E3C-9E27-FBE203627EB6_to_shape__84825181-3B2D-4F27-A8B2-8CCD239C6E56" bpmnElement="_0409E887-1135-4904-A9DA-6CC497E228CB">
        <di:waypoint xsi:type="dc:Point" x="753.0" y="191.0"/>
        <di:waypoint xsi:type="dc:Point" x="833.0" y="191.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape__390B81F2-DD33-4FA0-9870-C9C7123EB7E5" bpmnElement="_390B81F2-DD33-4FA0-9870-C9C7123EB7E5">
        <dc:Bounds height="56.0" width="56.0" x="463.0" y="163.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__39688F1B-81D9-4E3C-9E27-FBE203627EB6" bpmnElement="_39688F1B-81D9-4E3C-9E27-FBE203627EB6">
        <dc:Bounds height="102.0" width="154.0" x="599.0" y="140.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__2CFC1986-696D-4293-A5B3-91502316F999" bpmnElement="_2CFC1986-696D-4293-A5B3-91502316F999">
        <dc:Bounds height="56.0" width="56.0" x="135.0" y="163.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__7BA4E759-44DC-4CDE-8A37-AB0D04BAAA47" bpmnElement="_7BA4E759-44DC-4CDE-8A37-AB0D04BAAA47">
        <dc:Bounds height="102.0" width="154.0" x="229.0" y="140.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__0F599C03-661E-4F9A-983A-1C4C1604E2BF" bpmnElement="_0F599C03-661E-4F9A-983A-1C4C1604E2BF">
        <dc:Bounds height="102.0" width="154.0" x="1097.0" y="140.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__2C24A2E9-49D6-44AA-B74A-752D8E1A6B54" bpmnElement="_2C24A2E9-49D6-44AA-B74A-752D8E1A6B54">
        <dc:Bounds height="56.0" width="56.0" x="1283.0" y="163.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__2CFC1986-696D-4293-A5B3-91502316F999_to_shape__7BA4E759-44DC-4CDE-8A37-AB0D04BAAA47" bpmnElement="_143DE49B-5E96-4678-8AD1-58513AF84C0A">
        <di:waypoint xsi:type="dc:Point" x="191.0" y="191.0"/>
        <di:waypoint xsi:type="dc:Point" x="229.0" y="191.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__7BA4E759-44DC-4CDE-8A37-AB0D04BAAA47_to_shape__5EA54193-192A-4C71-81E1-C0032A0C1E80" bpmnElement="_87E68D63-7C18-4CA4-9232-2EE6B43ADDE0">
        <di:waypoint xsi:type="dc:Point" x="306.0" y="191.0"/>
        <di:waypoint xsi:type="dc:Point" x="412.0" y="191.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__5EA54193-192A-4C71-81E1-C0032A0C1E80_to_shape__0F599C03-661E-4F9A-983A-1C4C1604E2BF" bpmnElement="_E06854FF-0FD5-42BC-BAC0-E2EAEEA2361B">
        <di:waypoint xsi:type="dc:Point" x="1062.0" y="191.0"/>
        <di:waypoint xsi:type="dc:Point" x="1097.0" y="191.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__0F599C03-661E-4F9A-983A-1C4C1604E2BF_to_shape__2C24A2E9-49D6-44AA-B74A-752D8E1A6B54" bpmnElement="_BF79674B-4B85-4FD0-BBCD-6DD25CE277E4">
        <di:waypoint xsi:type="dc:Point" x="1251.0" y="191.0"/>
        <di:waypoint xsi:type="dc:Point" x="1283.0" y="191.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_BjdASOCTEeqUC68H4d8fow" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_2CFC1986-696D-4293-A5B3-91502316F999" id="_BjdASeCTEeqUC68H4d8fow">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7BA4E759-44DC-4CDE-8A37-AB0D04BAAA47" id="_BjdASuCTEeqUC68H4d8fow">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_0F599C03-661E-4F9A-983A-1C4C1604E2BF" id="_BjdAS-CTEeqUC68H4d8fow">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_BjdAQOCTEeqUC68H4d8fow</bpmn2:source>
    <bpmn2:target>_BjdAQOCTEeqUC68H4d8fow</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
